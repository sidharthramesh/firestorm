department: opthalmology
concepts: 
    # Tonometry Read Panel
    - 79896-7:
        reader:
            name: tonometry
    # Tonometry Write Panels
    - 79896-7:goldmans:
        name: "Goldman's Applanation Tonometry"
        writer:
            name: tonometry
            data:
                method: "goldman's"
                icon: observation
    # Refraction
    - 79898-3:
        reader:
            name: refraction
    - <118235002:
        writer:
            name: eye-condition
            data:
                icon: condition
    # Refraction with dilatation
    - 79898-3:objective-dialated:
        name: "Objective Refraction: Dilated"
        writer:
            name: refraction
            data:
                type: objective
                dilatation: dilated
                icon: observation
    # Refraction without dilatation
    - 79898-3:objective-undilated:
        name: "Objective Refraction: Undilated"
        writer:
            name: refraction
            data:
                type: objective
                dilatation: undilated
                icon: observation
    - 79898-3:subjective-dialated:
        name: "Subjective Refraction: Dilated"
        writer:
            name: refraction
            data:
                type: subjective
                dilatation: dilated
                icon: observation
    # Refraction without dilatation
    - 79898-3:subjective-undilated:
        name: "Subjective Refraction: Undilated"
        writer:
            name: refraction
            data:
                type: subjective
                dilatation: undilated
                icon: observation
    # Central Corneal Thickness
    - 79897-5:
        reader:
            name: central-cornael-thickness
            scripts:
                testScript:
                    title: "High Central Corneal Thickness"
                    description: "Please consule http://www.google.com for more information"
                    script: >
                        resources=>{
                            let resources = resources.filter(res=>{res.code=='79897-5'})
                            console.log(resources)
                        }
        writer:
            name: central-cornael-thickness
        
    # Medication Panel
    
    # Latralizable conditions
    - ^latralizable:
        writer:
            name: lateralizable-condition
        reader:
            name: lateralizable-condition

refsets:
    latralizable:
        # Iris
        - 423552003
        - 231724007
        - 386608003
        - 51485001
        - 111512005
        - 247034002
        - 51995000
        - 95709007
        - 231727000
        - 231725008
        - 75895005
        - 55828000
        - 44958007
        - 301932008
        - 246993000
        - 246992005
        - 246986004
        - 247032003
        - 45953007
        - 87807004
        - 247015002
        - 77676001
        - 75229002
        # Ocular movements
        - 37214009
        - 563001
        - 399054005
        - 16596007
        - 39837002
        - 111530003
        - 164045002
        - 366079002
        - 29491004
        - 40608009
        - 366073001
        - 398760006
        - 49768006
        - 27590007
        - 162821003
        # Lens
        - 313236002
        - 312722002
        - 422188005
        - 213115006
        - 261161001
        - 172532006
        - 371346008
        - 766834007
        - 37125009
        - 418683009
        - 44219007
        - 385468004
        - 315353005
        - 24010005
        - 95724003
        - 373417007
        - 312699008
        - 116669003
        - 193821003
        - 255507004
        - 1361009
        - 370935006
